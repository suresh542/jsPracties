<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div>
        <div>
            <form action="">
                <label for="">First Name</label>
                <input type="text" name="" id="fname11"><br>
                <label for="" class="form-label">Last Name</label>
                <input type="text" name="" id="lname11" placeholder=""><br>
                <button type="button" class="" onclick="uploadBtnHere()">Upload</button>
            </form>
            <br>
            <hr>
            <br>
            <table border="1">
                <thead>
                    <th>First Name</th>
                    <th>Last Name</th>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        // 1. Create user
        // var users =""
        function uploadBtnHere() {
            var userInput = {
                fname11: "",
                lname11: ""
            }
            for (a in userInput) { 
                 userInput[a] = document.getElementById(a).value
            }
            // displayAllTable(userInput)
            // users= push(userInput)
            // console.log(userInput)
            var postUser = new XMLHttpRequest()
            postUser.onreadystatechange = function () {
                if (postUser.status == 201 && postUser.readyState == 4) {
                    displayAllUser();
                    console.log("Create User")
                }

            }
            postUser.open("POST", "http://localhost:3000/userInput")
            postUser.setRequestHeader("Content-Type", "application/json")
            postUser.send(JSON.stringify(userInput))

        }
        // 2, Display user
        function displayAllUser() {
            var getTheAPI = new XMLHttpRequest();
            getTheAPI.onreadystatechange = function () {
                if (getTheAPI.readyState == 4 && getTheAPI.status == 200) {
                    console.log(getTheAPI.response)
                    users = JSON.parse(getTheAPI.response)
                    displayAllTable(users)
                }
            }
            getTheAPI.open("GET", "http://localhost:3000/userInput")
            // postUser.send(JSON.stringify(userInput))
            getTheAPI.send()
        }

        function displayAllTable(users) {
            for (i = 0; i < users.length; i++) {
                var myTr11 = document.createElement("tr")
                for (a in users[0]) {
                    var tdTable = document.createElement("td")
                    myTr11.innerHTML = users[i][a]
                    myTr11.appendChild[tdTable]
                }
                document.querySelector("tbody").appendChild(myTr11)
            }
        }
        displayAllUser()
    // 3. Read user
    // 4. update user
    // 5.delete user
    </script>
</body>

</html>